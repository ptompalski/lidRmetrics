# lidRmetrics
Additional point cloud metrics to use with *_metric functions in lidR. 


## Installation 

You can install the most recent version of the package by executing the code below:

```
install.packages("devtools")
devtools::install_github("ptompalski/lidRmetrics")
library(lidRmetrics)
```


## Example usage

All of the functions in lidRmetrics are designed to be used with one of the *_metrics functions in the lidR package (e.g. grid_metrics()). 

For example:

```
library(lidR)
library(lidRmetrics)

LASfile <- system.file("extdata", "Megaplot.laz", package="lidR")
las <- readLAS(LASfile, select = "*", filter = "-keep_random_fraction 0.5")

m1 <- cloud_metrics(las, ~metrics_basic(Z))

m2 <- grid_metrics(las, ~metrics_set1(Z))

m3 <- grid_metrics(las, ~metrics_set2(X, Y, Z), res = 20)
```

## List of metrics

| Metrics name                                                                                 | Description                                                                                                                                                                                                                                                                                                                                                                                                                                     | metrics\_\* function   | Notes                                                                                                                                                                                                              |
| -------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| n                                                                                            | total number of returns                                                                                                                                                                                                                                                                                                                                                                                                                         | metrics\_basic         |                                                                                                                                                                                                                    |
| zmax, zmin, zmean, zsd, zcv, zskew, zkurt                                                    | elevation maximum, minimum, mean, standard deviation, coeficient of variation, skewness, and kurtosis                                                                                                                                                                                                                                                                                                                                           | metrics\_basic         |                                                                                                                                                                                                                    |
| zq1, zq5, …, zq95, zq99                                                                      | elevation percentiles                                                                                                                                                                                                                                                                                                                                                                                                                           | metrics\_percentiles   |                                                                                                                                                                                                                    |
| pzabovemean, pzabove2, pzabove5                                                              | percentage of returns above a threshold. By default, percent of returns above mean elevation, above 2 and 5 m are calculated.                                                                                                                                                                                                                                                                                                                   | metrics\_percabove     |                                                                                                                                                                                                                    |
| ziqr                                                                                         | interquartile distance                                                                                                                                                                                                                                                                                                                                                                                                                          | metrics\_dispersion    |                                                                                                                                                                                                                    |
| zMADmean, zMADmedian                                                                         | mean absolute deviation from the mean, and from the median                                                                                                                                                                                                                                                                                                                                                                                      | metrics\_dispersion    |                                                                                                                                                                                                                    |
| CRR                                                                                          | canopy relief ratio ((mean - min) / (max – min))                                                                                                                                                                                                                                                                                                                                                                                                | metrics\_dispersion    |                                                                                                                                                                                                                    |
| zentropy, VCI                                                                                | normalized Shanon diversity index, Vertical Complexity Index                                                                                                                                                                                                                                                                                                                                                                                    | metrics\_dispersion    | van Ewijk, K. Y., Treitz, P. M., & Scott, N. A. (2011). Characterizing Forest Succession in Central Ontario using LAS-derived Indices. Photogrammetric Engineering and Remote Sensing, 77(3), 261-269              |
| zpcum1, zpcum2,..., zpcum8, zpcum9                                                           | canopy density metrics as defined by Woods et al 2008. Elevation range is divided into 10 equal intervals, and the cumulative proportion of returns in each interval is calculated. For example, zpcum3 is a cumulative percentage of returns located in lower 30% of maximum elevation. The results for the last (topmost) layer is not reported as it always equal to 100%. The number of layers (default = 10) can be specified by the user. | metrics\_canopydensity | M. Woods, K. Lim, and P. Treitz. Predicting forest stand variables from LiDAR data in the Great Lakes – St. Lawrence forest of Ontario. The Forestry Chronicle. 84(6): 827-839. https://doi.org/10.5558/tfc84827-6 |
| L1, L2, L3, L4, Lskew, Lkurt, Lcoefvar                                                       | L-moments (L1, L2, L3, L4), L-moment skewness and kurtosis, L-moment coeficient of variation                                                                                                                                                                                                                                                                                                                                                    | metrics\_Lmoments      | requires the {lmoments} package                                                                                                                                                                                    |
| lad\_max, lad\_mean, lad\_cv, lad\_min                                                       | Metrics based on the leaf area density                                                                                                                                                                                                                                                                                                                                                                                                          | metrics\_lad           |                                                                                                                                                                                                                    |
| pz\_below\_0, pz\_0.0.15, pz\_0.15.2, pz\_2.5, pz\_5.10, pz\_10.20, pz\_20.30, pz\_above\_30 | Interval metrics - proportion of returns between specified elevation intervals. Default intervals are: 0, 0.15, 2, 5, 10, 20, and 30.                                                                                                                                                                                                                                                                                                           | metrics\_interval      |                                                                                                                                                                                                                    |