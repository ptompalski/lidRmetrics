---
  output: github_document
---
  
  <!-- README.md is generated from README.Rmd. Please edit that file -->
  
# lidRmetrics

Additional point cloud metrics for use with *_metric functions in the `lidR` package. 

The package serves as a companion to the `lidR` package and offers a variety of functions for calculating different types of point cloud metrics. These include `metrics_basic()` for basic information about the point cloud, `metrics_percentiles()` for height percentiles, `metrics_percabove()` and `metrics_dispersion()` for characterizing the vertical structure. Additionally, `metrics_echo()` and `metrics_echo2()` provide information on the number and proportion of different return types, while `metrics_interval()` calculates the percentage of points by horizontal layers. More complex metrics such as `metrics_kde` and `metrics_voxels()` are also included. A comprehensive list of metrics and their corresponding functions can be found in the table below.

These individual functions serve as building blocks that can be combined to create various sets of metrics. The package includes three examples of such metric sets.


## Installation 

You can install the most recent version of the package by executing the code below:

```{r, eval=FALSE}
devtools::install_github("ptompalski/lidRmetrics")
library(lidRmetrics)
```


## Example usage

All of the functions in `lidRmetrics` are designed to be used with one of the *_metrics functions in the `lidR` package (e.g. `pixel_metrics()`). 

For example:

```{r, eval=FALSE}
library(lidR)
library(lidRmetrics)

LASfile <- system.file("extdata", "Megaplot.laz", package="lidR")
las <- readLAS(LASfile, select = "*", filter = "-keep_random_fraction 0.5")

m1 <- cloud_metrics(las, ~metrics_basic(Z))

m2 <- pixel_metrics(las, ~metrics_set1(Z), res = 20)

m3 <- pixel_metrics(las, ~metrics_set2(X, Y, Z), res = 20)
```

## List of metrics


```{r, echo=F, message=FALSE}
library(readxl)
library(knitr)
library(tidyverse)

# rmarkdown::pandoc_options(to = "md",args = "-all_symbols_escapable")

mtrxs <- readxl::read_excel("list_of_metrics.xlsx")

# names(mtrxs)[3] <- knitr::inline_expr("metrics_* function")
# mtrxs <- mtrxs %>% mutate(`Metrics name` = paste0("`",`Metrics name`,"`"))


options(knitr.kable.NA = '')
# kable(mtrxs, format = "html") #promissing
# pander::pander(mtrxs, split.tables=Inf, split.cells = c(10, 25, 15, 40),
#                          style="rmarkdown", missing="")

# html_table_width <- function(kable_output, width){
#   width_html <- paste0(paste0('<col width="', width, '">'), collapse = "\n")
#   sub('<table>', paste0('<table class="table">\n', width_html), kable_output)
# }
# 
# html_table_width <- function(kable_output, width){
#   width_html <- paste0(paste0('<col width="', width, '">'), collapse = "\n")
#   sub("<table>", paste0("<table>\n", width_html), kable_output)
# }

kable_out <- knitr::kable(mtrxs, "html") 

readr::write_file(kable_out, "kable_out.html")


```



```{r, echo=FALSE}
htmltools::includeHTML("kable_out.html")
```


