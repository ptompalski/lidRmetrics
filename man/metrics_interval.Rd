% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/metrics_interval.R
\docType{data}
\name{metrics_interval}
\alias{metrics_interval}
\alias{.metrics_interval}
\title{Interval metrics}
\format{
An object of class \code{formula} of length 2.
}
\usage{
metrics_interval(
  z,
  zintervals = c(0, 0.15, 2, 5, 10, 20, 30),
  zmin = NA_real_,
  right = FALSE
)

.metrics_interval
}
\arguments{
\item{z}{A numeric vector of heights (e.g., `Z` from a LAS object).}

\item{zintervals}{Numeric, strictly increasing. Interior breakpoints for
height intervals (e.g., \code{c(0, 0.15, 2, 5, 10, 20, 30)}).
The full set of breaks used is \code{c(-Inf, zintervals, Inf)}, producing:
\itemize{
  \item a "below" bin: \code{(-Inf, zintervals[1])}
  \item interior bins: \code{[zintervals[i], zintervals[i+1])}
  \item an "above" bin: \code{[zintervals[length(zintervals)], Inf)}
}
With \code{right = FALSE} (used internally), each bin includes its left
boundary and excludes its right boundary, except the open-ended top bin
which includes all values \eqn{\ge} the last breakpoint.}

\item{zmin}{Optional numeric scalar. If provided, values are filtered as
\code{z > zmin} before binning (strictly greater).}

\item{right}{Logical, default `FALSE`. Passed to `hist()` to control whether
intervals are right-closed (`TRUE`) or right-open (`FALSE`).}
}
\value{
A named list of percentages (numeric) for each interval.
}
\description{
Compute the percentage of points falling within user-defined height
intervals.
}
\details{
Internally, counts are computed with:
\preformatted{
  breaks <- c(-Inf, zintervals, Inf)
  hist(z, breaks = breaks, plot = FALSE, right = FALSE)
}
Using `right = FALSE` enforces left-closed, right-open bins (`[a,b)`),
which guarantees, for example, that `0` is included in `[0, next)` rather
than the "below" bin. Proportions are the counts divided by the number of
points remaining after optional `zmin` filtering, multiplied by 100.

Output names follow:
\itemize{
  \item \code{pz_below_<first>} for the below bin
  \item \code{pz_<a>-<b>} for each interior \code{[a,b)} bin
  \item \code{pz_above_<last>} for the above bin
}
}
\examples{
library(lidR)
library(lidRmetrics)
LASfile <- system.file("extdata", "Megaplot.laz", package="lidR")
las <- readLAS(LASfile, select = "*", filter = "-keep_random_fraction 0.5")

m1 <- cloud_metrics(las, ~metrics_interval(z = Z))

m2 <- pixel_metrics(las, ~metrics_interval(z = Z, zintervals = c(0, 5, 10)), res = 20)
}
\keyword{datasets}
